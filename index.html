<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>サバンナ動物シミュレーション</title>
    <link rel="stylesheet" href="./main.css">
</head>
<body>
    <div id="canvas-container"></div>
    
    <div class="time-display" id="time-display">
        08:00
    </div>
    
    <div class="camera-target-display" id="camera-target">
        フリーカメラ
    </div>
    
    <div class="camera-mode-display" id="camera-mode">
        フリー
    </div>
    
    <div id="control-panel">
        <h3>🦁 サバンナ動物シミュレーション</h3>
        
        <!-- APIキー設定部分 -->
        <div class="api-settings">
            <h4>API設定</h4>
            <div class="api-provider">
                <label for="apiProvider">APIプロバイダー:</label>
                <select id="apiProvider">
                    <option value="openai">OpenAI</option>
                    <option value="anthropic">Anthropic</option>
                    <option value="google">Google</option>
                </select>
            </div>
            <div class="api-key">
                <label for="apiKey">APIキー:</label>
                <input type="password" id="apiKey" placeholder="APIキーを入力してください">
                <button onclick="setApiKey()">設定</button>
                <button onclick="clearApiKey()">クリア</button>
            </div>
            <div class="api-status" id="apiStatus">
                ステータス: 未設定
            </div>
        </div>
        
        <div class="simulation-controls">
            <button onclick="startSimulation()" id="startBtn">開始</button>
            <button onclick="pauseSimulation()" id="pauseBtn" disabled>一時停止</button>
            <select id="timeSpeed" onchange="setTimeSpeed()">
                <option value="1">1x</option>
                <option value="2">2x</option>
                <option value="5">5x</option>
                <option value="10">10x</option>
            </select>
        </div>
        <div class="camera-controls">
            <button id="personViewBtn">動物視点切り替え</button>
            <button id="facilityViewBtn">地形・ねぐら視点切り替え</button>
            <button id="resetCamera">全体表示</button>
            <button id="cameraZoomIn">＋</button>
            <button id="cameraZoomOut">−</button>
        </div>
        <div class="road-visualization">
            <button id="toggleRoadNetwork">地形ネットワーク表示</button>
            <button id="clearRoadVisualization">地形表示クリア</button>
        </div>
        <div class="simulation-info">
            <h4>動物の種類</h4>
            <p>🦁 ライオン: 百獣の王、強力な狩人</p>
            <p>🐘 ゾウ: 陸上最大、知能が高い</p>
            <p>🦒 キリン: 首が長く、高い木の葉を食べる</p>
            <p>🦓 シマウマ: 模様が特徴的、素早く逃げる</p>
            <p>🦛 ハイエナ: 狡猾で知能が高い</p>
        </div>
        <div class="terrain-info">
            <h4>地形の種類</h4>
            <p>🌿 草原: 草食動物の餌場</p>
            <p>🌳 木: 木の葉を食べる場所</p>
            <p>💧 池: 水を飲む場所</p>
            <p>🕳️ 洞穴: 安全な避難場所</p>
            <p>🪵 倒木: 隠れ場所</p>
            <p>🪨 大きな石: 見張り場所</p>
        </div>
    </div>
    
    <div id="info-panel">
        <div id="agent-info">
            <h3>サバンナの動物たち</h3>
            <p>シミュレーションを開始すると動物が表示されます</p>
        </div>
        <div id="selected-animal-info">
            <h3>選択された動物</h3>
            <p>動物をクリックして詳細を表示</p>
        </div>
    </div>
    
    <div id="log-panel">
        <h3>活動ログ</h3>
        <div id="activity-log"></div>
    </div>

    <button id="showPanelsBtn" style="position:fixed; left:10px; bottom:10px; z-index:9999; display:none; font-size:13px;">パネル再表示</button>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
     
     <script src="./config.js"></script>
     <script src="./character.js"></script>
     <script src="./agent.js"></script>
     <script src="./log.js"></script>
     <script src="./panel.js"></script>
     <script src="./buildings.js"></script>
     <script src="./citylayout.js"></script>
     <script src="./terrain.js"></script>
     <script src="./main.js"></script>
</body>
</html>